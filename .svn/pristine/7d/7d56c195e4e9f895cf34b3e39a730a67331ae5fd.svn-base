{"version":3,"sources":["flower.js"],"names":["Actor","require","cc","Class","extends","properties","init","animation","node","getComponent","Animation","arguments","ENUM","PROP_COLOR","RED","play","BLUE","playBorthAni","getSize","size","getContentSize","rect","x","y","width","height","interactive","actor","sizeOne","sizeTwo","rectOne","rectTwo","Intersection","rectRect","formState","FORM_STATE","SMALL","fsm","switchStateWithStack","BIG","FIRE","EM","emit","type","SCORE_EFFECT","v2","removeFromParent","moveUp","moveBy","runAction","update","dt","isPause","isOutScreen","pause","pauseAllActions","resume","resumeAllActions"],"mappings":"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","file":"flower.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\prop","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar Actor=require(\"actor\");\r\ncc.Class({\r\n    extends:Actor,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    init(){\r\n        this.animation=this.node.getComponent(cc.Animation);\r\n        switch(arguments[1]){\r\n            case ENUM.PROP_COLOR.RED:\r\n            this.animation.play(\"flower_red\");\r\n            break;\r\n            case ENUM.PROP_COLOR.BLUE:\r\n            this.animation.play(\"flower_blue\");\r\n            break;\r\n        } \r\n        this.playBorthAni();                           \r\n    },\r\n    getSize(){\r\n        let size=this.node.getContentSize();\r\n        return cc.rect(this.node.x,this.node.y,size.width,size.height);\r\n    },\r\n    // onLoad () {},\r\n    interactive(actor){\r\n        let sizeOne=actor.getSize();\r\n        let sizeTwo=this.getSize();\r\n        let rectOne=cc.rect(sizeOne.x-sizeOne.width/2,sizeOne.y,sizeOne.width,sizeOne.height);\r\n        let rectTwo=cc.rect(sizeTwo.x-sizeTwo.width/2,sizeTwo.y,sizeTwo.width,sizeTwo.height);\r\n        if(cc.Intersection.rectRect(rectOne,rectTwo)){\r\n            switch(actor.formState){\r\n                case FORM_STATE.SMALL:\r\n                    actor.fsm.switchStateWithStack(\"to_big\");\r\n                break;\r\n                case FORM_STATE.BIG:    \r\n                    actor.fsm.switchStateWithStack(\"flash_catch_flower\");\r\n                break;\r\n                case FORM_STATE.FIRE:\r\n                    EM.emit(EM.type.SCORE_EFFECT, cc.v2(this.node.x, this.node.y + 80),1000);\r\n                break;\r\n            } \r\n            this.node.removeFromParent();\r\n        }\r\n    },\r\n    //出场动画\r\n    playBorthAni(){\r\n        let moveUp=cc.moveBy(0.6,cc.v2(0,40));\r\n        this.node.runAction(moveUp);\r\n    },\r\n    update (dt) {\r\n        if(this.isPause)return;\r\n\r\n        if(this.isOutScreen()){\r\n            this.node.removeFromParent();\r\n        }\r\n    },\r\n    pause(){\r\n        this.isPause=true;\r\n        this.animation.pause();\r\n        this.node.pauseAllActions();\r\n    },\r\n    resume(){   \r\n        this.isPause=false;\r\n        this.animation.resume();\r\n        this.node.resumeAllActions();\r\n    }\r\n});\r\n"]}