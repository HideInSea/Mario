{"version":3,"sources":["mapMgr.js"],"names":["cc","Class","extends","Component","properties","maps","type","TiledMapAsset","default","aex","Prefab","coin","question","init","player","order","tm","node","getComponent","TiledMap","tmxAsset","global","getRound","mapSize","getMapSize","currCol","addChild","propMgr","getChildByName","monsterMgr","writeflagLayer","getLayer","zIndex","sceneLayer","obstacleLayer","coinLayer","endflag","pipeLayer","posLayer","getObjectGroup","monsterLayer","propLayer","hideLayer","hideObjs","getObjects","paseTile","EM","on","COLLSI_FLAG","collsiFlag","RISE_WRITE_FLAG","riseWriteFlag","moveUp","moveBy","v2","runAction","sequence","callFunc","setTimeout","emit","GAME_PASS","moveDown","FLAG_TOUCH_LAND","playerToEnd","onDestroy","off","screenPosToMapPos","pos","convertToNodeSpace","mapPosToScreenPos","convertToWorldSpace","toTiledPos","Vec2","Math","floor","x","ceil","y","tilePosToPos","tilePos","getObstacleTileAt","width","tile","gid","getTileGIDAt","paseObstacleGid","getTiledTileAt","isArrContainGid","GID","WALL","TILE_TYPE","ROPE","AEX","QUESTION","HIDE_QUESTION","COIN","PIPE_H_ENTRY","PIPE_V_ENTRY","FLAG","LAND","arr","value","isFullScreen","row","col","offset","localPos","i","j","addQuestionAni","addCoinAni","addAexAni","instantiate","addBrockAni","update","dt","start","Date","now","mapPos","screenPos","addPushAni","hideObj","moveup","movedown","reverse","target","data","CREATE_PROP","pushQuestion","removeAllChildren","getObjectAt","collsiWithPushWall","SOLID","COIN_EFFECT","pushHideQuestion","pushWall","getPlayerState","FORM_STATE","SMALL","PIECES_EFFECT","solid","ENUM","PROP_TYPE","count","undefined","random","collsiCoin","ADD_COIN","name","isObjectInScreen","obj","winSize","t","wallBox","rect","gm"],"mappings":"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","file":"mapMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        maps:{\r\n            type:cc.TiledMapAsset,\r\n            default:[]\r\n        },\r\n        aex:cc.Prefab,\r\n        coin:cc.Prefab,\r\n        question:cc.Prefab\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    init(player){\r\n        //解析地图数据\r\n        let order=1;\r\n        this.tm=this.node.getComponent(cc.TiledMap);\r\n        this.tm.tmxAsset=this.maps[global.getRound()];\r\n        this.mapSize=this.tm.getMapSize();\r\n        this.currCol=0;\r\n\r\n        //初始化各层之间的层级关系\r\n        this.node.addChild(player);\r\n\r\n\r\n        let propMgr=this.node.getChildByName(\"propMgr\");\r\n        let monsterMgr=this.node.getChildByName(\"monsterMgr\");\r\n\r\n        this.writeflagLayer=this.tm.getLayer(\"writeflag\");\r\n        this.writeflagLayer.node.zIndex=order++;\r\n        this.sceneLayer=this.tm.getLayer(\"scene\");\r\n        this.sceneLayer.node.zIndex=order++;\r\n\r\n        propMgr.zIndex=order++;\r\n\r\n        this.obstacleLayer=this.tm.getLayer(\"obstacle\");\r\n        this.obstacleLayer.node.zIndex=order++;\r\n\r\n        this.coinLayer=this.tm.getLayer(\"coin\");\r\n        this.coinLayer.node.zIndex=order++;\r\n\r\n        this.endflag=this.tm.getLayer(\"endflag\");\r\n        this.endflag.node.zIndex=order++;\r\n\r\n        monsterMgr.zIndex=order++;\r\n        player.zIndex=order++;\r\n\r\n        this.pipeLayer=this.tm.getLayer(\"pipe\");\r\n        this.pipeLayer.node.zIndex=order++;\r\n\r\n        this.posLayer=this.tm.getObjectGroup(\"position\");\r\n        this.monsterLayer=this.tm.getObjectGroup(\"monster\");\r\n        this.propLayer=this.tm.getObjectGroup(\"prop\");\r\n        this.hideLayer=this.tm.getObjectGroup(\"hide\");\r\n        //this.positionObjs=this.getObjects();\r\n        this.hideObjs=this.hideLayer.getObjects();\r\n\r\n        //解析一次全屏tile\r\n        this.paseTile(true);\r\n\r\n        EM.on(EM.type.COLLSI_FLAG,this.collsiFlag,this);\r\n        EM.on(EM.type.RISE_WRITE_FLAG,this.riseWriteFlag,this);\r\n    },\r\n    //升城堡旗帜\r\n    riseWriteFlag(){\r\n        let moveUp=cc.moveBy(1,cc.v2(0,80));\r\n        this.writeflagLayer.node.runAction(cc.sequence(moveUp,cc.callFunc(function(){\r\n            setTimeout(function(){\r\n                EM.emit(EM.type.GAME_PASS);\r\n            },2000);\r\n        },this)));\r\n    },\r\n    //白旗降到地面\r\n    collsiFlag(){\r\n        let moveDown=cc.moveBy(1.2,cc.v2(0,-320));\r\n        this.endflag.node.runAction(cc.sequence(moveDown,cc.callFunc(function(){\r\n            EM.emit(EM.type.FLAG_TOUCH_LAND);\r\n        },this)));\r\n    },\r\n    //玩家走到终点\r\n    playerToEnd(){\r\n\r\n    },\r\n    onDestroy(){\r\n        EM.off(EM.type.COLLSI_FLAG);\r\n        EM.off(EM.type.RISE_WRITE_FLAG);\r\n    },\r\n    //将屏幕坐标转换成地图坐标\r\n    screenPosToMapPos(pos){\r\n        return this.node.convertToNodeSpace(pos);\r\n    },\r\n    //将地图坐标转换为屏幕坐标\r\n    mapPosToScreenPos(pos){\r\n        return this.node.convertToWorldSpace(pos);\r\n    },\r\n    //点坐标转换为tile坐标\r\n    toTiledPos(pos){\r\n        return new cc.Vec2(Math.floor(pos.x/40),Math.ceil(15-pos.y/40));\r\n    },\r\n    //将格子坐标转换为地图坐标\r\n    tilePosToPos(tilePos){\r\n        return new cc.Vec2(tilePos.x*40,(15-tilePos.y)*40);\r\n    },\r\n    //获取某地图坐标障碍物tiled\r\n    getObstacleTileAt(pos){\r\n        let tilePos=this.toTiledPos(pos);\r\n        if(tilePos.y<0||tilePos.y>15||tilePos.x<0||tilePos.x>this.mapSize.width-1)return{type:null,tile:null};\r\n        let gid=this.obstacleLayer.getTileGIDAt(tilePos);\r\n        if(gid){\r\n            let type=this.paseObstacleGid(gid);\r\n            let tile=this.obstacleLayer.getTiledTileAt(tilePos.x,tilePos.y,true);\r\n            return {type:type,tile:tile};\r\n        }\r\n        gid=this.pipeLayer.getTileGIDAt(tilePos);\r\n        if(gid){\r\n            let type=this.paseObstacleGid(gid);\r\n            let tile=this.pipeLayer.getTiledTileAt(tilePos.x,tilePos.y,true);\r\n            return {type:type,tile:tile};\r\n        }\r\n        gid=this.coinLayer.getTileGIDAt(tilePos);\r\n        if(gid){\r\n            let type=this.paseObstacleGid(gid);\r\n            let tile=this.coinLayer.getTiledTileAt(tilePos.x,tilePos.y,true);\r\n            return {type:type,tile:tile};\r\n        }\r\n        return {type:null,tile:null};\r\n    },\r\n\r\n    //解析障碍物的类型\r\n    paseObstacleGid(gid){\r\n        if(this.isArrContainGid(GID.WALL,gid)){\r\n            return TILE_TYPE.WALL;\r\n        }else if(this.isArrContainGid(GID.ROPE,gid)){\r\n            return TILE_TYPE.ROPE;\r\n        }else if(this.isArrContainGid(GID.AEX,gid)){\r\n            return TILE_TYPE.AEX;\r\n        }else if(this.isArrContainGid(GID.QUESTION,gid)){\r\n            return TILE_TYPE.QUESTION;\r\n        }else if(this.isArrContainGid(GID.HIDE_QUESTION,gid)){\r\n            return TILE_TYPE.HIDE_QUESTION;\r\n        }else if(this.isArrContainGid(GID.COIN,gid)){\r\n            return TILE_TYPE.COIN;\r\n        }else if(this.isArrContainGid(GID.PIPE_H_ENTRY,gid)){\r\n            return TILE_TYPE.PIPE_H_ENTRY;\r\n        }else if(this.isArrContainGid(GID.PIPE_V_ENTRY,gid)){\r\n            return TILE_TYPE.PIPE_V_ENTRY;;\r\n        }else if(this.isArrContainGid(GID.FLAG,gid)){\r\n            return TILE_TYPE.FLAG;\r\n        }else{\r\n            return TILE_TYPE.LAND;\r\n        }\r\n    },\r\n    isArrContainGid(arr,gid){\r\n        for(let value of arr){\r\n            if(value===gid)return true;\r\n        }\r\n        return false;\r\n    },\r\n    //解析tile，根据tile的类型去添加相应的动画\r\n    paseTile(isFullScreen){  \r\n        let row=16;\r\n        let col=0,offset=0;\r\n        if(isFullScreen){\r\n            offset=16;\r\n            let localPos=this.screenPosToMapPos(cc.v2(1,0));\r\n            let tilePos=this.toTiledPos(localPos);\r\n            col=tilePos.x;\r\n            this.currCol=col;\r\n        }else{\r\n            col=this.currCol;\r\n            offset=1;\r\n        }\r\n\r\n        for(let i=col;i<col+offset;i++){\r\n            this.currCol++;\r\n            for(let j=0;j<row;j++){\r\n                if(col>=this.mapSize.width)return;\r\n                let gid=this.coinLayer.getTileGIDAt(i,j);\r\n                let type=this.paseObstacleGid(gid);\r\n                switch(type){\r\n                    case TILE_TYPE.QUESTION:\r\n                        this.addQuestionAni(this.coinLayer.getTiledTileAt(i,j,true));\r\n                    break;\r\n                    case TILE_TYPE.COIN:\r\n                        this.addCoinAni(this.coinLayer.getTiledTileAt(i,j,true));\r\n                    break;\r\n                    case TILE_TYPE.AEX:\r\n                        this.addAexAni(this.coinLayer.getTiledTileAt(i,j,true));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        //cc.log(count);\r\n        //cc.log(Date.now());\r\n    },\r\n    addCoinAni(tile){\r\n        let coin=cc.instantiate(this.coin);\r\n        coin.getComponent(\"coin\").init(tile);\r\n    },\r\n    addQuestionAni(tile){\r\n        let question=cc.instantiate(this.question);\r\n        question.getComponent(\"question\").init(tile);\r\n    },\r\n    addAexAni(tile){\r\n        let aex=cc.instantiate(this.aex);\r\n        tile.node.addChild(aex);\r\n    },\r\n    addBrockAni(tile){\r\n        tile.gid=0;\r\n    },\r\n    update (dt) {\r\n        //dt>0.02?cc.log(dt):dt;\r\n        let start=Date.now();\r\n        let mapPos=this.tilePosToPos(new cc.Vec2(this.currCol,0));\r\n        let screenPos=this.mapPosToScreenPos(mapPos);\r\n        if(screenPos.x<680){\r\n            this.paseTile(false);\r\n        }\r\n        // let end=Date.now();\r\n        //cc.log((end-start)/1000);\r\n\r\n    },\r\n    //添加砖块被顶动作,如果存在隐藏对象，动画结束创建隐藏对象\r\n    addPushAni(tile,hideObj) {\r\n        var moveup = cc.moveBy(0.1, cc.v2(0, 20));\r\n        var movedown = moveup.reverse();\r\n        tile.node.runAction(cc.sequence(moveup, movedown,cc.callFunc(function(target,data){\r\n            if(data.hideObj)EM.emit(EM.type.CREATE_PROP,data.pos,data.hideObj);\r\n        },this,{pos:cc.v2(tile.node.x+20,tile.node.y),hideObj:hideObj})));\r\n    },\r\n\r\n    //顶问号墙\r\n    pushQuestion(tile) {\r\n        tile.node.removeAllChildren();\r\n        let hideObj=this.getObjectAt(this.hideObjs,cc.v2(tile.x,tile.y));\r\n        this.collsiWithPushWall(tile);\r\n        //红色\r\n        if (tile.gid === GID.QUESTION[1]||tile.gid===GID.HIDE_QUESTION[0]) {\r\n            tile.gid=GID.SOLID[1];\r\n        }\r\n        //蓝色\r\n        else if (tile.gid === GID.QUESTION[0]||tile.gid===GID.HIDE_QUESTION[1]) {\r\n            tile.gid=GID.SOLID[0];\r\n        }\r\n        this.addPushAni(tile,hideObj);\r\n        if(!hideObj){\r\n            EM.emit(EM.type.COIN_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 80), 200);\r\n        }\r\n    },\r\n\r\n    //顶到隐藏的问号\r\n    pushHideQuestion(tile){\r\n        this.pushQuestion(tile);\r\n    },\r\n    //顶普通墙\r\n    pushWall(tile) {\r\n        let hideObj=this.getObjectAt(this.hideObjs,cc.v2(tile.x,tile.y));\r\n        this.collsiWithPushWall(tile);\r\n        //大形态且没有隐藏道具将墙顶碎\r\n        if (global.getPlayerState()!==FORM_STATE.SMALL&&!hideObj) {\r\n            EM.emit(EM.type.PIECES_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 60), tile.gid);\r\n            tile.gid = 0;\r\n        }else{\r\n            if(hideObj){  \r\n                let solid=true;\r\n                if(hideObj===ENUM.PROP_TYPE.COIN&&tile.count===undefined){\r\n                    tile.count=Math.floor(Math.random()*3+4);\r\n                    EM.emit(EM.type.COIN_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 80), 200);\r\n                    solid=false;\r\n                }else if(hideObj===ENUM.PROP_TYPE.COIN&&tile.count>0){\r\n                    tile.count--;\r\n                    EM.emit(EM.type.COIN_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 80), 200);\r\n                    solid=false;\r\n                }else if(hideObj===ENUM.PROP_TYPE.COIN&&tile.count===0){\r\n                    EM.emit(EM.type.COIN_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 80), 200);\r\n                }\r\n\r\n                if(solid){\r\n                    switch(tile.gid){\r\n                        case GID.WALL[0]:                   //红色\r\n                        case GID.WALL[3]:\r\n                            tile.gid=GID.SOLID[1];\r\n                        break;          \r\n                        case GID.WALL[1]:                   //蓝色\r\n                        case GID.WALL[4]:\r\n                            tile.gid=GID.SOLID[0];\r\n                        break;\r\n                        case GID.WALL[2]:                   //灰色\r\n                        case GID.WALL[5]:\r\n                            tile.gid=GID.SOLID[2];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            this.addPushAni(tile,hideObj);\r\n        }\r\n    },\r\n\r\n    //碰到金币\r\n    collsiCoin(tile) {\r\n        tile.gid = 0;\r\n        tile.node.removeAllChildren();\r\n        EM.emit(EM.type.ADD_COIN, 1);\r\n    },\r\n\r\n    //获取某对象数组指定坐标的对象\r\n    getObjectAt(arr,tilePos){\r\n        for(let value of arr){\r\n            let pos=this.toTiledPos(cc.v2(value.x,value.y));\r\n            if(tilePos.x===pos.x&&tilePos.y===pos.y){\r\n                return value.name;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    //判断某个对象是否出现在当前屏幕中\r\n    isObjectInScreen(obj){\r\n        let pos=this.node.convertToWorldSpace(cc.v2(obj.x,obj.y));\r\n        if(pos.x<global.winSize.width+40&&pos.x>-40){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    collsiWithPushWall(tile){\r\n        let t=this.getObstacleTileAt(cc.v2(tile.node.x,tile.node.y+40));\r\n        if(!t.type){\r\n            let wallBox=cc.rect(tile.node.x+20,tile.node.y+40,30,40);\r\n            gm.monsterMgr.collsiWithPushWall(wallBox);\r\n            gm.propMgr.collsiWithPushWall(wallBox);\r\n        }else if(t.type===TILE_TYPE.COIN){\r\n            t.tile.node.removeAllChildren();\r\n            t.tile.gid=0; \r\n            EM.emit(EM.type.COIN_EFFECT, cc.v2(tile.node.x + 20, tile.node.y + 80), 200);\r\n        }\r\n    }\r\n});\r\n"]}