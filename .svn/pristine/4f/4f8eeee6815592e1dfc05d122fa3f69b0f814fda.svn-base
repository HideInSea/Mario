{"version":3,"sources":["monsterMgr.js"],"names":["cc","Class","extends","Component","properties","mushroom","Prefab","duck","mflower","fire","fireBall","boss","helmet","fish","octopus","aex","ninjia","hedgehog","skyShoot","rocket","rocketFire","init","monsterObjs","utils","deepClone","gm","mapMgr","monsterLayer","getObjects","currBoss","isBossDie","resetObjects","onLoad","EM","on","type","PAUSE_ACTOR","pauseActor","RESUME_ACTOR","resumeActor","REMOVE_ALL_MON","node","removeAllChildren","CREATE_MONSTER","createMonster","getMonsters","children","i","length","getComponent","name","pause","resume","pos","monName","args","split","mon","script","ENUM","MON_TYPE","MUSHROOM","instantiate","DUCK","FLOWER","v2","x","y","FIRE","FIRE_BALL","BOSS","HELMET","FISH","OCTOPUS","AEX","NINJIA","HEDGEHOG","SKYSHOOT","ROCKET","ROCKETFIRE","addChild","setPosition","apply","update","dt","collsitionWithPlayer","collsitionWithMonster","collsitionWithBullet","iteratorMonsterObjects","onDestroy","off","collsiWithPushWall","wallBox","interactive","playerScript","one","j","collsiWithMon","pBullets","bulletMgr","getPBullet","collsiWithPlayerBullet","isObjectInScreen","obj","splice","tPos","toTiledPos","tilePosToPos"],"mappings":"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","file":"monsterMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        mushroom:cc.Prefab,\r\n        duck:cc.Prefab,\r\n        mflower:cc.Prefab,\r\n        fire:cc.Prefab,\r\n        fireBall:cc.Prefab,\r\n        boss:cc.Prefab,\r\n        helmet:cc.Prefab,\r\n        fish:cc.Prefab,\r\n        octopus:cc.Prefab,\r\n        aex:cc.Prefab,\r\n        ninjia:cc.Prefab,\r\n        hedgehog:cc.Prefab,\r\n        skyShoot:cc.Prefab,\r\n        rocket:cc.Prefab,\r\n        rocketFire:cc.Prefab\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    init(){\r\n        this.monsterObjs=utils.deepClone(gm.mapMgr.monsterLayer.getObjects());\r\n        this.currBoss=null;\r\n        this.isBossDie=false;\r\n    },\r\n    resetObjects(){\r\n        this.monsterObjs=utils.deepClone(gm.mapMgr.monsterLayer.getObjects());\r\n    },\r\n    onLoad () {\r\n        EM.on(EM.type.PAUSE_ACTOR,this.pauseActor,this);\r\n        EM.on(EM.type.RESUME_ACTOR,this.resumeActor,this);\r\n        EM.on(EM.type.REMOVE_ALL_MON,function(){\r\n            this.node.removeAllChildren();\r\n        },this);\r\n        EM.on(EM.type.CREATE_MONSTER,this.createMonster,this);\r\n    },\r\n    getMonsters(){\r\n        return this.node.children;\r\n    },\r\n    pauseActor(){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            children[i].getComponent(children[i].name).pause();            \r\n        }\r\n    },\r\n    resumeActor(){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            children[i].getComponent(children[i].name).resume();            \r\n        }\r\n    },\r\n    createMonster(pos,monName){\r\n        let args=monName.split(\"_\");\r\n        let mon=null;\r\n        let script=null;\r\n        switch(args[0]){\r\n            case ENUM.MON_TYPE.MUSHROOM:\r\n                mon=cc.instantiate(this.mushroom);\r\n                script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.DUCK:\r\n                mon=cc.instantiate(this.duck);\r\n                script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.FLOWER:\r\n                mon=cc.instantiate(this.mflower);\r\n                script=mon.getComponent(mon.name);\r\n                pos=cc.v2(pos.x+20,pos.y);\r\n            break;\r\n            case ENUM.MON_TYPE.FIRE:\r\n                mon=cc.instantiate(this.fire);\r\n                script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.FIRE_BALL:\r\n                mon=cc.instantiate(this.fireBall);\r\n                script=mon.getComponent(mon.name);\r\n                pos=cc.v2(pos.x,pos.y+20);\r\n            break;\r\n            case ENUM.MON_TYPE.BOSS:\r\n                mon=cc.instantiate(this.boss);\r\n                script=mon.getComponent(mon.name);\r\n                this.currBoss=script;\r\n            break;\r\n            case ENUM.MON_TYPE.HELMET:\r\n            mon=cc.instantiate(this.helmet);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.FISH:\r\n            mon=cc.instantiate(this.fish);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.OCTOPUS:\r\n            mon=cc.instantiate(this.octopus);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.AEX:\r\n            mon=cc.instantiate(this.aex);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.NINJIA:\r\n            mon=cc.instantiate(this.ninjia);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.HEDGEHOG:\r\n            mon=cc.instantiate(this.hedgehog);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.SKYSHOOT:\r\n            mon=cc.instantiate(this.skyShoot);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.ROCKET:\r\n            mon=cc.instantiate(this.rocket);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n            case ENUM.MON_TYPE.ROCKETFIRE:\r\n            mon=cc.instantiate(this.rocketFire);\r\n            script=mon.getComponent(mon.name);\r\n            break;\r\n        }\r\n        this.node.addChild(mon);\r\n        mon.setPosition(pos);\r\n        script.init.apply(script,args);\r\n    },\r\n    update (dt) {\r\n        //怪物与玩家的碰撞检测\r\n        this.collsitionWithPlayer();\r\n\r\n        //怪物与怪物的碰撞检测\r\n        this.collsitionWithMonster();\r\n\r\n        //与玩家子弹的碰撞检测\r\n        this.collsitionWithBullet();\r\n\r\n        //遍历怪物对象组\r\n        this.iteratorMonsterObjects();\r\n    },  \r\n    onDestroy(){\r\n\r\n        EM.off(EM.type.PAUSE_ACTOR);\r\n        EM.off(EM.type.RESUME_ACTOR);\r\n        EM.off(EM.type.REMOVE_ALL_MON);\r\n        EM.off(EM.type.CREATE_MONSTER);\r\n    },\r\n    collsiWithPushWall(wallBox){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            children[i].getComponent(children[i].name).collsiWithPushWall(wallBox);            \r\n        }\r\n    },\r\n    collsitionWithPlayer(){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            children[i].getComponent(children[i].name).interactive(gm.playerScript);            \r\n        }\r\n    },\r\n    collsitionWithMonster(){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            let one=children[i].getComponent(children[i].name);\r\n            for(let j=0;j<children.length;j++){\r\n                if(i==j)continue;\r\n                one.collsiWithMon(children[j].getComponent(children[j].name));\r\n            }      \r\n        }\r\n    },\r\n    collsitionWithBullet(){\r\n        let children=this.node.children;\r\n        for(let i=0;i<children.length;i++){\r\n            let mon=children[i].getComponent(children[i].name);\r\n            let pBullets=gm.bulletMgr.getPBullet();\r\n            for(let j=0;j<pBullets.length;j++){\r\n                mon.collsiWithPlayerBullet(pBullets[j].getComponent(pBullets[j].name));\r\n            }\r\n        }\r\n    },\r\n    //遍历怪物对象组，找出出现在当前屏幕中的对象\r\n    iteratorMonsterObjects(){\r\n        for(let i=0;i<this.monsterObjs.length;i++){\r\n            if(gm.mapMgr.isObjectInScreen(this.monsterObjs[i])){\r\n                let obj=this.monsterObjs.splice(i,1);\r\n                i--;\r\n                let tPos=gm.mapMgr.toTiledPos(cc.v2(obj[0].x,obj[0].y));\r\n                let pos=gm.mapMgr.tilePosToPos(tPos);\r\n                this.createMonster(cc.v2(pos.x+20,pos.y),obj[0].name);\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}