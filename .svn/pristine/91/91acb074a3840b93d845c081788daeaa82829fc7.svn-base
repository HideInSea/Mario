{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\monster/assets\\script\\monster\\fireBall.js"],"names":["Actor","require","cc","Class","extends","properties","big","Prefab","small","init","currFireBall","arguments","ENUM","FIRE_BALL_TYPE","BIG","instantiate","SMALL","node","addChild","ballAnimation","getComponent","Animation","interactive","actor","isDie","sizeOne","getSize","globalPos","parent","convertToWorldSpace","v2","x","width","y","playerBox","rect","height","children","i","length","fireBox","getBoundingBoxToWorld","Intersection","rectRect","isFlashing","isInvincible","getFormState","FORM_STATE","fsm","switchStateWithStack","switchState","update","dt","isOutScreen","removeFromParent","pause","resume"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAMC,QAAQ,OAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAAQJ,KADH;;AAGLK,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,aAAIJ,GAAGK,MAhBC;AAiBRC,eAAMN,GAAGK;AAjBD,KAHP;;AAuBL;AACAE,QAxBK,kBAwBC;AACF,aAAKC,YAAL,GAAkB,IAAlB;AACA,gBAAOC,UAAU,CAAV,CAAP;AACI,iBAAKC,KAAKC,cAAL,CAAoBC,GAAzB;AACA,qBAAKJ,YAAL,GAAkBR,GAAGa,WAAH,CAAe,KAAKT,GAApB,CAAlB;AACA;AACA,iBAAKM,KAAKC,cAAL,CAAoBG,KAAzB;AACA,qBAAKN,YAAL,GAAkBR,GAAGa,WAAH,CAAe,KAAKP,KAApB,CAAlB;AACA;AANJ;AAQA,aAAKS,IAAL,CAAUC,QAAV,CAAmB,KAAKR,YAAxB;AACA,aAAKS,aAAL,GAAmB,KAAKT,YAAL,CAAkBU,YAAlB,CAA+BlB,GAAGmB,SAAlC,CAAnB;AACH,KApCI;AAqCLC,eArCK,uBAqCOC,KArCP,EAqCa;AACd,YAAGA,MAAMC,KAAT,EAAe;AACf,YAAIC,UAAQF,MAAMG,OAAN,EAAZ;AACA,YAAIC,YAAUJ,MAAMN,IAAN,CAAWW,MAAX,CAAkBC,mBAAlB,CAAsC3B,GAAG4B,EAAH,CAAML,QAAQM,CAAR,GAAUN,QAAQO,KAAR,GAAc,CAA9B,EAAgCP,QAAQQ,CAAxC,CAAtC,CAAd;AACA,YAAIC,YAAUhC,GAAGiC,IAAH,CAAQR,UAAUI,CAAlB,EAAoBJ,UAAUM,CAA9B,EAAgCR,QAAQO,KAAxC,EAA8CP,QAAQW,MAAtD,CAAd;AACA,YAAIC,WAAS,KAAK3B,YAAL,CAAkB2B,QAA/B;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAED,SAASE,MAAvB,EAA8BD,GAA9B,EAAkC;AAC9B,gBAAIE,UAAQH,SAASC,CAAT,EAAYG,qBAAZ,EAAZ;AACA,gBAAGvC,GAAGwC,YAAH,CAAgBC,QAAhB,CAAyBT,SAAzB,EAAmCM,OAAnC,CAAH,EAA+C;AAC/C;AACA,oBAAG,CAACjB,MAAMqB,UAAP,IAAmB,CAACrB,MAAMsB,YAA7B,EAA0C;AACtC,wBAAGtB,MAAMuB,YAAN,OAAuBC,WAAW/B,KAArC,EAA2C;AACvCO,8BAAMyB,GAAN,CAAUC,oBAAV,CAA+B,UAA/B;AACH,qBAFD,MAEK;AACD1B,8BAAMyB,GAAN,CAAUE,WAAV,CAAsB,KAAtB;AACH;AACJ;AACD;AACC;AACJ;AACJ,KAzDI;AA0DLxB,WA1DK,qBA0DI;AACL,eAAOxB,GAAGiC,IAAH,CAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,EAAc,CAAd,CAAP;AACH,KA5DI;AA6DLgB,UA7DK,kBA6DGC,EA7DH,EA6DO;AACR,YAAG,KAAKC,WAAL,EAAH,EAAsB;AAClB,iBAAKpC,IAAL,CAAUqC,gBAAV;AACH;AACJ,KAjEI;AAkELC,SAlEK,mBAkEE;AACH,aAAKpC,aAAL,CAAmBoC,KAAnB;AACH,KApEI;AAqELC,UArEK,oBAqEG;AACJ,aAAKrC,aAAL,CAAmBqC,MAAnB;AACH;AAvEI,CAAT","file":"fireBall.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\monster","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar Actor=require(\"actor\");\r\n\r\ncc.Class({\r\n    extends:Actor,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        big:cc.Prefab,\r\n        small:cc.Prefab\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    init(){\r\n        this.currFireBall=null;\r\n        switch(arguments[1]){\r\n            case ENUM.FIRE_BALL_TYPE.BIG:\r\n            this.currFireBall=cc.instantiate(this.big);\r\n            break;\r\n            case ENUM.FIRE_BALL_TYPE.SMALL:\r\n            this.currFireBall=cc.instantiate(this.small);\r\n            break;\r\n        }\r\n        this.node.addChild(this.currFireBall);\r\n        this.ballAnimation=this.currFireBall.getComponent(cc.Animation);\r\n    },\r\n    interactive(actor){\r\n        if(actor.isDie)return;\r\n        let sizeOne=actor.getSize();\r\n        let globalPos=actor.node.parent.convertToWorldSpace(cc.v2(sizeOne.x-sizeOne.width/2,sizeOne.y));\r\n        let playerBox=cc.rect(globalPos.x,globalPos.y,sizeOne.width,sizeOne.height);\r\n        let children=this.currFireBall.children;\r\n        for(let i=0;i<children.length;i++){\r\n            let fireBox=children[i].getBoundingBoxToWorld();\r\n            if(cc.Intersection.rectRect(playerBox,fireBox)){\r\n            //闪烁状态碰到怪物\r\n            if(!actor.isFlashing&&!actor.isInvincible){\r\n                if(actor.getFormState()!==FORM_STATE.SMALL){\r\n                    actor.fsm.switchStateWithStack(\"to_small\");\r\n                }else{\r\n                    actor.fsm.switchState(\"die\");\r\n                }\r\n            }\r\n            return;\r\n            }\r\n        }\r\n    },\r\n    getSize(){\r\n        return cc.rect(0,0,0,0);\r\n    },\r\n    update (dt) {\r\n        if(this.isOutScreen()){\r\n            this.node.removeFromParent();\r\n        }\r\n    },\r\n    pause(){\r\n        this.ballAnimation.pause();\r\n    },\r\n    resume(){\r\n        this.ballAnimation.resume();\r\n    }\r\n});\r\n"]}