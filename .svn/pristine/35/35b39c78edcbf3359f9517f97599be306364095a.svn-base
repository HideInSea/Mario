{"version":3,"sources":["wall_effect.js"],"names":["Piece","target","vCurrSpeed","hCurrSpeed","vCurrAcceleration","hCurrAcceleration","dt","y","x","cc","Class","extends","Component","properties","redSkin","Prefab","blueSkin","graySkin","onLoad","leftTop","rightTop","leftDown","rightDown","hAcceration","vAcceleration","setTimeout","node","removeFromParent","bind","init","gid","currSprite","genPiece","start","skin","one","instantiate","two","three","four","addChild","rotRight","rotateBy","rotLeft","runAction","repeatForever","clone","update"],"mappings":"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","file":"wall_effect.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\prop","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nclass Piece{\r\n    constructor(target){\r\n        this.target=target;\r\n        this.vCurrSpeed=0;\r\n        this.hCurrSpeed=0;\r\n        this.vCurrAcceleration=0;\r\n        this.hCurrAcceleration=0;\r\n    }\r\n\r\n    update(dt){\r\n        //垂直方向的运动更新\r\n        this.target.y+=this.vCurrSpeed*dt+this.vCurrAcceleration*dt*dt*.5;\r\n        this.vCurrSpeed+=this.vCurrAcceleration*dt;\r\n\r\n        //水平方向的运动更新\r\n        this.target.x+=this.hCurrSpeed*dt+this.hCurrAcceleration*dt*dt*.5;\r\n        this.hCurrSpeed+=this.hCurrAcceleration*dt;\r\n    }\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        redSkin:cc.Prefab,\r\n        blueSkin:cc.Prefab,\r\n        graySkin:cc.Prefab\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.leftTop=null;\r\n        this.rightTop=null;\r\n        this.leftDown=null;\r\n        this.rightDown=null;\r\n        this.hAcceration=0;\r\n        this.vAcceleration=-1800;\r\n\r\n        //3秒后移除\r\n        setTimeout(function(){\r\n            this.node.removeFromParent();\r\n        }.bind(this),3000);\r\n    },\r\n    init(gid){\r\n        let currSprite=null;\r\n        switch(gid){\r\n            case 1:\r\n            case 21:\r\n                currSprite=this.redSkin;\r\n            break;\r\n            case 2:\r\n            case 22:\r\n                currSprite=this.blueSkin;\r\n            break;\r\n            case 3:\r\n            case 33:\r\n                currSprite=this.graySkin;\r\n            break;\r\n        }\r\n        this.genPiece(currSprite);\r\n    },\r\n    start () {\r\n\r\n    },\r\n    genPiece(skin){\r\n        let one=cc.instantiate(skin);\r\n        let two=cc.instantiate(skin);\r\n        let three=cc.instantiate(skin);\r\n        let four=cc.instantiate(skin);\r\n\r\n        this.node.addChild(one);\r\n        this.node.addChild(two);\r\n        this.node.addChild(three);\r\n        this.node.addChild(four);\r\n\r\n        this.leftTop=new Piece(one);\r\n        this.rightTop=new Piece(two);\r\n        this.leftDown=new Piece(three);\r\n        this.rightDown=new Piece(four);\r\n\r\n        this.leftTop.vCurrSpeed=500;\r\n        this.leftTop.hCurrSpeed=-150;\r\n        this.leftTop.vCurrAcceleration=this.vAcceleration;\r\n        this.leftTop.hCurrAcceleration=this.hAcceration;\r\n\r\n        this.rightTop.vCurrSpeed=500;\r\n        this.rightTop.hCurrSpeed=150;\r\n        this.rightTop.vCurrAcceleration=this.vAcceleration;\r\n        this.rightTop.hCurrAcceleration=this.hAcceration;\r\n\r\n        this.leftDown.vCurrSpeed=200;\r\n        this.leftDown.hCurrSpeed=-150;\r\n        this.leftDown.vCurrAcceleration=this.vAcceleration;\r\n        this.leftDown.hCurrAcceleration=this.hAcceration;\r\n\r\n        this.rightDown.vCurrSpeed=200;\r\n        this.rightDown.hCurrSpeed=150;\r\n        this.rightDown.vCurrAcceleration=this.vAcceleration;\r\n        this.rightDown.hCurrAcceleration=this.hAcceration;\r\n\r\n        let rotRight=cc.rotateBy(0.5,360);\r\n        let rotLeft=cc.rotateBy(0.5,-360);\r\n\r\n        two.runAction(cc.repeatForever(rotRight.clone()));\r\n        four.runAction(cc.repeatForever(rotRight.clone()));\r\n        one.runAction(cc.repeatForever(rotLeft.clone()));\r\n        three.runAction(cc.repeatForever(rotLeft.clone()));\r\n        \r\n    },\r\n    update (dt) {\r\n        this.leftTop.update(dt);\r\n        this.rightDown.update(dt);\r\n        this.leftDown.update(dt);\r\n        this.rightTop.update(dt);\r\n    }\r\n});\r\n"]}