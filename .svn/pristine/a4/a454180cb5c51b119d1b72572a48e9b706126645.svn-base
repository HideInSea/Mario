{"version":3,"sources":["duckState.js"],"names":["State","require","Walk","cc","Class","extends","onEnter","target","state","ENUM","DUCK_STATE","WALK","hCurrSpeed","getHSpeed","vCurrAcceleration","vCurrSpeed","isOnLand","playWalkAni","dir","DIR","DIR_LEFT","turnLeft","turnRight","type","MON_COLOR","RED","animation","play","BLUE","GREEN","Jump","JUMP","playJumpAni","Fly","FLY","playFlyAni","moveUp","moveBy","v2","moveDown","reverse","node","runAction","repeatForever","sequence","UpDown","UP_DOWN","playUpDownAni","easing","easeCubicActionInOut","Slide","SLIDE","playSlideAni","Flash","FLASH","playFlashAni","id","setTimeout","_fsm","switchState","bind","onExit","clearTimeout","TopTurn","TOP_TURN","playTopTurnAni","isDie","scaleY","y","hCurrAcceleration","enableCollsi","Sleep","SLEEP","playSleepAni","Fall","stopAllActions","FALL","playFallAni","module","exports"],"mappings":"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","file":"duckState.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\state\\monsterState","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar State=require(\"state\");\r\n//walk\r\nvar Walk=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.WALK;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.target.vCurrAcceleration=0;\r\n        this.target.vCurrSpeed=0;\r\n        this.target.isOnLand=true;\r\n        this.playWalkAni();\r\n    },\r\n    playWalkAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"walk_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"walk_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"walk_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nvar Jump=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.JUMP;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.target.vCurrAcceleration=-1240;\r\n        this.target.vCurrSpeed=550;\r\n        this.target.isOnLand=false;\r\n        this.playJumpAni();\r\n    },\r\n    playJumpAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"fly_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"fly_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"fly_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nvar Fly=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.FLY;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.target.isOnLand=false;\r\n        this.playFlyAni();\r\n        let moveUp=cc.moveBy(0.88,cc.v2(0,40)); \r\n        let moveDown=moveUp.reverse();\r\n        this.target.node.runAction(cc.repeatForever(cc.sequence(moveUp,moveDown)));\r\n    },\r\n    playFlyAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"fly_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"fly_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"fly_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nvar UpDown=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.UP_DOWN;\r\n        this.target.isOnLand=false;\r\n        this.playUpDownAni();\r\n        let moveUp=cc.moveBy(4,cc.v2(0,320)).easing(cc.easeCubicActionInOut());\r\n        let moveDown=cc.moveBy(4,cc.v2(0,-320)).easing(cc.easeCubicActionInOut());\r\n        this.target.node.runAction(cc.repeatForever(cc.sequence(moveUp,moveDown)));\r\n    },\r\n    playUpDownAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"fly_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"fly_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"fly_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nvar Slide=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.SLIDE;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.playSlideAni();\r\n    },\r\n    playSlideAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"sleep_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"sleep_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"sleep_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nvar Flash=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.FLASH;\r\n        this.playFlashAni();\r\n\r\n        this.id=setTimeout(function(){\r\n            this._fsm.switchState(\"walk\");\r\n        }.bind(this),2000);\r\n    },\r\n    playFlashAni(){\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"flash_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"flash_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"flash_green\");\r\n            break;\r\n        }\r\n    },\r\n    onExit(){\r\n        clearTimeout(this.id);\r\n    }\r\n});\r\n\r\n\r\nvar TopTurn=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.TOP_TURN;\r\n        this.playTopTurnAni();\r\n        this.target.isOnLand=false;\r\n        this.target.isDie=true;\r\n        this.target.node.scaleY=-1;\r\n        this.target.node.y+=40;\r\n        this.target.vCurrSpeed=300;\r\n        this.target.vCurrAcceleration=-1400;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n        this.target.enableCollsi=false;\r\n    },\r\n    playTopTurnAni(){\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n                this.target.animation.play(\"die_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n                this.target.animation.play(\"die_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n                this.target.animation.play(\"die_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\nvar Sleep=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.DUCK_STATE.SLEEP;\r\n        this.playSleepAni();\r\n        this.target.vCurrSpeed=0;\r\n        this.target.vCurrAcceleration=0;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n\r\n        this.id=setTimeout(function(){\r\n            this._fsm.switchState(\"flash\");\r\n        }.bind(this),3000);\r\n    },\r\n    playSleepAni(){\r\n        \r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"sleep_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"sleep_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"sleep_green\");\r\n            break;\r\n        }\r\n    },\r\n    onExit(){\r\n        clearTimeout(this.id);\r\n    }\r\n});\r\n\r\n\r\n//下落\r\nvar Fall=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.node.stopAllActions();\r\n        this.target.state=ENUM.DUCK_STATE.FALL;\r\n        this.target.vCurrSpeed=0;\r\n        this.target.vCurrAcceleration=-1200;\r\n        this.target.isOnLand=false;\r\n        this.playFallAni();\r\n    },\r\n    playFallAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.type){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"walk_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"walk_blue\");\r\n            break;\r\n            case ENUM.MON_COLOR.GREEN:\r\n            this.target.animation.play(\"walk_green\");\r\n            break;\r\n        }\r\n    }\r\n});\r\nmodule.exports={Sleep,TopTurn,Flash,Slide,UpDown,Fly,Jump,Walk,Fall};"]}