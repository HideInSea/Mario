{"version":3,"sources":["fishState.js"],"names":["State","require","Swim","cc","Class","extends","onEnter","target","state","ENUM","FISH_STATE","SWIM","hCurrSpeed","hDefSpe","moveUp","moveBy","v2","moveDown","reverse","node","runAction","repeatForever","sequence","playSwimAni","color","MON_COLOR","RED","animation","play","GRAY","Fly","FLY","vCurrSpeed","vCurrAcceleration","moveDir","FISH_DIR","RIGHT","x","dir","DIR","DIR_RIGHT","DIR_LEFT","getHSpeed","playFlyAni","turnLeft","turnRight","LEFT","Die","TOP_TURN","stop","isDie","scaleY","y","hCurrAcceleration","enableCollsi","module","exports"],"mappings":"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","file":"fishState.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\state\\monsterState","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar State=require(\"state\");\r\n//swim\r\nvar Swim=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.FISH_STATE.SWIM;\r\n        this.target.hCurrSpeed=-this.target.hDefSpe;\r\n        let moveUp=cc.moveBy(5,cc.v2(0,40));\r\n        let moveDown=moveUp.reverse();\r\n        this.target.node.runAction(cc.repeatForever(cc.sequence(moveUp,moveDown)));\r\n\r\n        this.playSwimAni();\r\n    },\r\n    playSwimAni(){\r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"fly_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"fly_gray\");\r\n            break;\r\n        }\r\n    }\r\n}); \r\n\r\n\r\nvar Fly=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.FISH_STATE.FLY;\r\n\r\n        this.target.vCurrSpeed=560;\r\n        this.target.vCurrAcceleration=-280;\r\n        \r\n        if(this.target.moveDir===ENUM.FISH_DIR.RIGHT){\r\n            this.target.node.x-=40*16;\r\n            this.target.dir=DIR.DIR_RIGHT;\r\n        }else{\r\n            this.target.dir=DIR.DIR_LEFT;\r\n        }\r\n        this.target.hCurrSpeed=this.getHSpeed();\r\n        this.playFlyAni();\r\n    },\r\n    playFlyAni(){\r\n        \r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"fly_red\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"fly_gray\");\r\n            break;\r\n        }\r\n    },\r\n    getHSpeed(){\r\n        return this.target.moveDir===ENUM.FISH_DIR.LEFT?-320:320;\r\n    }\r\n});\r\n\r\n\r\n\r\nvar Die=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.TOP_TURN;\r\n        this.target.animation.stop();\r\n        this.target.isDie=true;\r\n        this.target.node.scaleY=-1;\r\n        this.target.node.y+=40;\r\n        this.target.vCurrSpeed=300;\r\n        this.target.vCurrAcceleration=-1400;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n        this.target.enableCollsi=false;\r\n    }\r\n});\r\n\r\nmodule.exports={Fly,Die,Swim};"]}