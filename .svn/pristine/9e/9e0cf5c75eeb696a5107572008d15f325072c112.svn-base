{"version":3,"sources":["helmetState.js"],"names":["State","require","Walk","cc","Class","extends","onEnter","target","state","ENUM","HELMET_STATE","WALK","hCurrSpeed","getHSpeed","vCurrAcceleration","vCurrSpeed","isOnLand","playWalkAni","dir","DIR","DIR_LEFT","turnLeft","turnRight","color","MON_COLOR","RED","animation","play","BLUE","GRAY","Slide","SLIDE","playSlideAni","TopTurn","TOP_TURN","playTopTurnAni","isDie","node","scaleY","y","hCurrAcceleration","enableCollsi","Sleep","SLEEP","playSleepAni","id","setTimeout","_fsm","switchState","bind","onExit","clearTimeout","module","exports"],"mappings":"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","file":"helmetState.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\state\\monsterState","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar State=require(\"state\");\r\n//walk\r\nvar Walk=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.HELMET_STATE.WALK;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.target.vCurrAcceleration=0;\r\n        this.target.vCurrSpeed=0;\r\n        this.target.isOnLand=true;\r\n        this.playWalkAni();\r\n    },\r\n    playWalkAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"red_walk\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"blue_walk\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"gray_walk\");\r\n            break;\r\n        }\r\n    }\r\n}); \r\n\r\n\r\nvar Slide=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.HELMET_STATE.SLIDE;\r\n        this.target.hCurrSpeed=this.target.getHSpeed();\r\n        this.playSlideAni();\r\n    },\r\n    playSlideAni(){\r\n        this.target.dir===DIR.DIR_LEFT?this.target.turnLeft():this.target.turnRight();\r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"red_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"blue_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"gray_sleep\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\nvar TopTurn=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.HELMET_STATE.TOP_TURN;\r\n        this.playTopTurnAni();\r\n        this.target.isOnLand=false;\r\n        this.target.isDie=true;\r\n        this.target.node.scaleY=-1;\r\n        this.target.node.y+=40;\r\n        this.target.vCurrSpeed=300;\r\n        this.target.vCurrAcceleration=-1400;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n        this.target.enableCollsi=false;\r\n    },\r\n    playTopTurnAni(){\r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"red_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"blue_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"gray_sleep\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n\r\nvar Sleep=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.HELMET_STATE.SLEEP;\r\n        this.playSleepAni();\r\n        this.target.vCurrSpeed=0;\r\n        this.target.vCurrAcceleration=0;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n\r\n        this.id=setTimeout(function(){\r\n            this._fsm.switchState(\"walk\");\r\n        }.bind(this),3000);\r\n    },\r\n    playSleepAni(){\r\n        \r\n        switch(this.target.color){\r\n            case ENUM.MON_COLOR.RED:\r\n            this.target.animation.play(\"red_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.BLUE:\r\n            this.target.animation.play(\"blue_sleep\");\r\n            break;\r\n            case ENUM.MON_COLOR.GRAY:\r\n            this.target.animation.play(\"gray_sleep\");\r\n            break;\r\n        }\r\n    },\r\n    onExit(){\r\n        clearTimeout(this.id);\r\n    }\r\n});\r\n\r\n\r\nmodule.exports={Sleep,TopTurn,Slide,Walk};"]}