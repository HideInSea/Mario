{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\prop/assets\\script\\prop\\cirrus.js"],"names":["Actor","require","cc","Class","extends","properties","head","Prefab","body","init","actorType","arguments","length","instantiate","y","node","addChild","bodys","push","i","moveUp","moveBy","v2","runAction","update","dt","reBorth","value","getSize","x","width","height","rect","interactive","actor","isDie","sizeOne","sizeTwo","actorCollsition","isOnCirrus","isLeftOrRight","turnLeft","turnRight","fsm","switchState"],"mappings":"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","file":"cirrus.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\prop","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar Actor=require(\"actor\");\r\ncc.Class({\r\n    extends:Actor,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        head:cc.Prefab,\r\n        body:cc.Prefab\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    \r\n    init(){\r\n        this.actorType=arguments[0];\r\n        this.length=6;\r\n        this.head=cc.instantiate(this.head);\r\n        this.head.y=0;\r\n        this.node.addChild(this.head);\r\n        this.bodys=[];\r\n        this.bodys.push(this.head);\r\n        for(let i=0;i<this.length;i++){\r\n            let body=cc.instantiate(this.body);\r\n            this.bodys.push(body);\r\n            this.node.addChild(body);\r\n        }\r\n\r\n        let moveUp=cc.moveBy(4,cc.v2(0,this.length*40));\r\n        this.head.runAction(moveUp);\r\n    },\r\n    update (dt) {\r\n        for(let i=1;i<this.bodys.length;i++){\r\n            if(this.bodys[i-1].y>38)this.bodys[i].y=this.bodys[i-1].y-39;\r\n            else break;\r\n        }\r\n    },\r\n    reBorth(){\r\n        for(let value of this.bodys){\r\n            value.y=0;\r\n        }\r\n        let moveUp=cc.moveBy(3,cc.v2(0,this.length*40));\r\n        this.head.runAction(moveUp);\r\n    },\r\n    getSize(){\r\n        let x=this.node.x;\r\n        let y=this.node.y;\r\n        let width=10;\r\n        let height=this.head.y+40;\r\n        return cc.rect(x,y,width,height);\r\n    },\r\n    interactive(actor){\r\n        if(actor.isDie)return;\r\n        let sizeOne=actor.getSize();\r\n        let sizeTwo=this.getSize();\r\n        if(this.actorCollsition(sizeOne,sizeTwo)){\r\n            if(actor.isOnCirrus){\r\n\r\n            }else{\r\n                actor.isOnCirrus=true;\r\n                actor.isLeftOrRight()?\r\n                (actor.turnLeft(),actor.node.x=this.node.x+10):\r\n                (actor.turnRight(),actor.node.x=this.node.x-10);\r\n                actor.fsm.switchState(\"climb\");\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}