{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\globalData.js"],"names":["PlayeData","id","round","score","coin","life","formState","FORM_STATE","FIRE","window","global","time","isGameOver","aniSynTime","Date","now","winSize","players","currPlayer","init","i","player","push","cc","size","EM","on","type","ADD_SCORE","addScore","ADD_COIN","addCoin","ADD_LEVEL","addLife","ADD_TIME","addTime","CHANGE_STATE","changeFormState","emit","UPDATE_TIME","nextRound","getRound","getRoundString","main","Math","floor","sub","nextPlayer","length","UPDATE_SCORE","UPDATE_COIN","state","getPlayerState"],"mappings":"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","file":"globalData.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nclass PlayeData{\r\n    constructor(){\r\n        this.id=1;\r\n        this.round=3;\r\n        this.score=0;\r\n        this.coin=0;\r\n        this.life=3;\r\n        this.formState=FORM_STATE.FIRE;\r\n    }\r\n}\r\n\r\nwindow.global={\r\n    time:300,\r\n    isGameOver:false,\r\n    aniSynTime:Date.now(),\r\n    winSize:null,\r\n    players:[],\r\n    currPlayer:null,\r\n    init:function(players){\r\n        for(let i=0;i<players;i++){\r\n            let player=new PlayeData();\r\n            player.id=i+1;\r\n            this.players.push(player);\r\n        }\r\n        this.currPlayer=this.players[0];\r\n        this.winSize=cc.size(640,640);\r\n\r\n        EM.on(EM.type.ADD_SCORE,this.addScore,this);\r\n        EM.on(EM.type.ADD_COIN,this.addCoin,this);\r\n        EM.on(EM.type.ADD_LEVEL,this.addLife,this);\r\n        EM.on(EM.type.ADD_TIME,this.addTime,this);\r\n        EM.on(EM.type.CHANGE_STATE,this.changeFormState,this);\r\n    },\r\n\r\n    addTime(time){\r\n        this.time+=time;\r\n        EM.emit(EM.type.UPDATE_TIME,this.time);\r\n    },\r\n\r\n    nextRound(){\r\n        this.currPlayer.round+=1;\r\n    },\r\n\r\n    getRound(){\r\n        return this.currPlayer.round;\r\n    },\r\n\r\n    getRoundString(){\r\n        let main=1+Math.floor(this.currPlayer.round/4);\r\n        let sub=1+this.currPlayer.round%4;\r\n        return main+\"-\"+sub;\r\n    },\r\n\r\n    nextPlayer(){\r\n        this.currPlayer=this.players[(this.currPlayer.id+1)%this.players.length];\r\n    },\r\n\r\n    addScore(score){\r\n        this.currPlayer.score+=score;\r\n        EM.emit(EM.type.UPDATE_SCORE,this.currPlayer.score);\r\n    },\r\n    addCoin(coin){\r\n        this.currPlayer.coin+=coin;\r\n        if(this.currPlayer.coin>=100){\r\n            this.currPlayer.coin%=100;\r\n            this.currPlayer.life++;\r\n        }\r\n        EM.emit(EM.type.UPDATE_COIN,this.currPlayer.coin);\r\n    },\r\n    addLife(life){\r\n        this.currPlayer.life+=life;\r\n    },\r\n    changeFormState(state){\r\n        this.currPlayer.formState=state;\r\n    },\r\n    getPlayerState(){\r\n        return this.currPlayer.formState;\r\n    }\r\n}\r\n"]}