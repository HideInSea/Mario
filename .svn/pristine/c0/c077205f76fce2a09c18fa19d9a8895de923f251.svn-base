{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\monster/assets\\script\\monster\\fire.js"],"names":["Actor","require","cc","Class","extends","properties","init","type","arguments","offset","dir","animation","node","getComponent","Animation","enableMove","ENUM","FIRE_TYPE","UP_DOWN","y","play","moveUp","moveBy","v2","easing","easeCubicActionInOut","moveDown","delay","delayTime","runAction","repeatForever","sequence","callFunc","turnDown","turnUp","LEFT","hCurrSpeed","anchorY","parseInt","DIR","DIR_LEFT","scaleY","isOutScreen","pos","convertToWorldSpace","x","global","winSize","width","height","getSize","size","getContentSize","rect","interactive","actor","isDie","sizeOne","sizeTwo","actorCollsition","isFlashing","isInvincible","getFormState","FORM_STATE","SMALL","fsm","switchStateWithStack","switchState","update","dt","move","removeFromParent","pause","pauseAllActions","resume","resumeAllActions"],"mappings":"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","file":"fire.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\monster","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar Actor=require(\"actor\");\r\ncc.Class({\r\n    extends:Actor,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        \r\n    },\r\n\r\n    init(){\r\n        this.type=arguments[1];\r\n        this.offset=arguments[2];\r\n        this.dir=arguments[3];\r\n        this.animation=this.node.getComponent(cc.Animation);\r\n        this.enableMove=true;\r\n        switch(this.type){\r\n            case ENUM.FIRE_TYPE.UP_DOWN:\r\n                this.node.y-=40;\r\n                this.animation.play(\"big\");\r\n                let moveUp=cc.moveBy(1.5,cc.v2(0,400)).easing(cc.easeCubicActionInOut());\r\n                let moveDown=cc.moveBy(1.5,cc.v2(0,-400)).easing(cc.easeCubicActionInOut());\r\n                let delay=cc.delayTime(2);\r\n                this.node.runAction(cc.repeatForever(cc.sequence(moveUp,cc.callFunc(this.turnDown,this),moveDown,delay,cc.callFunc(this.turnUp,this))));\r\n            break;\r\n            case ENUM.FIRE_TYPE.LEFT:\r\n                this.animation.play(\"small\");\r\n                this.hCurrSpeed=-200;\r\n                this.node.anchorY=0;\r\n                if(this.offset){\r\n                    let y=parseInt(this.offset);\r\n                    this.node.runAction(cc.moveBy(1,cc.v2(0,this.offset-this.node.y)));\r\n                    parseInt(this.dir)===DIR.DIR_LEFT?this.hCurrSpeed=-200:this.hCurrSpeed=200;\r\n                }\r\n            break;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    turnDown(){\r\n        this.node.scaleY=-1;\r\n    },\r\n    turnUp(){\r\n        this.node.scaleY=1;\r\n    },\r\n    isOutScreen(){\r\n        let pos=this.node.convertToWorldSpace(cc.v2(0,0));\r\n        return (pos.x>global.winSize.width+320||pos.x<-80||pos.y<-80||pos.y>global.winSize.height+80)?true:false;\r\n    },\r\n    getSize(){\r\n        let size=this.node.getContentSize();\r\n        let width=size.width-10;\r\n        let height=size.height-8;\r\n        let x=this.node.x;\r\n        let y=this.node.y;\r\n        if(this.type===ENUM.FIRE_TYPE.UP_DOWN){\r\n            y-=height/2;\r\n        }\r\n        return cc.rect(x,y,width,height); \r\n    },\r\n    interactive(actor){\r\n        if(actor.isDie)return;\r\n        let sizeOne=actor.getSize();\r\n        let sizeTwo=this.getSize();\r\n        if(this.actorCollsition(sizeOne,sizeTwo)){\r\n            //闪烁状态碰到怪物\r\n            if(!actor.isFlashing&&!actor.isInvincible){\r\n                if(actor.getFormState()!==FORM_STATE.SMALL){\r\n                    actor.fsm.switchStateWithStack(\"to_small\");\r\n                }else{\r\n                    actor.fsm.switchState(\"die\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n    update (dt) {\r\n        if(!this.enableMove)return;\r\n\r\n        this.move(dt);\r\n\r\n        if(this.isOutScreen()){\r\n            this.node.removeFromParent();\r\n        }\r\n\r\n    },\r\n    pause(){\r\n        this.animation.pause();\r\n        this.enableMove=false;\r\n        this.node.pauseAllActions();\r\n    },\r\n    resume(){\r\n        this.animation.resume();\r\n        this.enableMove=true;\r\n        this.node.resumeAllActions();\r\n    }\r\n});\r\n"]}