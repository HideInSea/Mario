{"version":3,"sources":["bossState.js"],"names":["State","require","Walk","cc","Class","extends","onEnter","target","state","ENUM","BOSS_STATE","WALK","playWalkAni","animation","play","resume","Fire","FIRE","playFireAni","id","setTimeout","callBack","bind","EM","emit","type","CREATE_MONSTER","getFirePos","getDesFireY","dir","_fsm","switchPreState","onExit","clearTimeout","TopTurn","UP_DOWN","node","scaleY","y","isDie","vCurrSpeed","vCurrAcceleration","hCurrSpeed","hCurrAcceleration","stopAllActions","unschedule","jump","fire","gm","monsterMgr","isBossDie","enableCollsi","Die","DIE","playDieAni","module","exports"],"mappings":"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","file":"bossState.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\state\\monsterState","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar State=require(\"state\");\r\n\r\nvar Walk=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.BOSS_STATE.WALK;\r\n\r\n\r\n        this.playWalkAni();\r\n    },\r\n    playWalkAni(){\r\n        this.target.animation.play(\"walk\");\r\n    },\r\n    resume(){\r\n        this.onEnter();\r\n    }\r\n});\r\n\r\n\r\n\r\nvar Fire=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.BOSS_STATE.FIRE;\r\n        this.playFireAni();\r\n        this.id=setTimeout(this.callBack.bind(this),1000);\r\n    },\r\n    playFireAni(){\r\n        this.target.animation.play(\"fire\");\r\n    },\r\n    callBack(){\r\n        EM.emit(EM.type.CREATE_MONSTER,this.target.getFirePos(),\"fire_left_\"+this.target.getDesFireY()+\"_\"+this.target.dir);\r\n        this._fsm.switchPreState();\r\n    },\r\n    onExit(){\r\n        clearTimeout(this.id);\r\n    }\r\n});\r\n\r\n\r\n//被顶翻\r\nvar TopTurn=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.BOSS_STATE.UP_DOWN;\r\n        this.target.node.scaleY=-1;\r\n        this.target.node.y+=80;\r\n        this.target.isDie=true;\r\n        this.target.vCurrSpeed=300;\r\n        this.target.vCurrAcceleration=-1400;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n        this.target.node.stopAllActions();\r\n        this.target.unschedule(this.target.jump);\r\n        this.target.unschedule(this.target.fire);\r\n        gm.monsterMgr.isBossDie=true;\r\n        this.target.enableCollsi=false;\r\n    }\r\n});\r\n\r\n\r\n//die\r\nvar Die=cc.Class({\r\n    extends:State,\r\n    onEnter(){\r\n        this.target.state=ENUM.BOSS_STATE.DIE;\r\n        this.playDieAni();\r\n        this.target.node.stopAllActions();\r\n        this.target.unschedule(this.target.jump);\r\n        this.target.unschedule(this.target.fire);\r\n\r\n        this.target.vCurrSpeed=0;\r\n        this.target.vCurrAcceleration=0;\r\n        this.target.hCurrSpeed=0;\r\n        this.target.hCurrAcceleration=0;\r\n        \r\n        setTimeout(function(){\r\n            this.target.vCurrAcceleration=-1400;\r\n        }.bind(this),2000);\r\n    },\r\n    playDieAni(){\r\n        this.target.animation.play(\"die\");\r\n    }\r\n});\r\n\r\nmodule.exports={Walk,Fire,TopTurn,Die}"]}