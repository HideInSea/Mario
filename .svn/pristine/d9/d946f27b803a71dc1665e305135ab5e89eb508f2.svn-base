{"version":3,"sources":["spring.js"],"names":["Actor","require","cc","Class","extends","properties","init","color","arguments","animation","node","getComponent","Animation","isOnSpring","spring","getSize","size","getContentSize","rect","x","his","y","width","height","interactive","actor","isDie","sizeOne","sizeTwo","actorCollsition","oldPos","tile","playerState","PLAYER_STATE","CLIMB","isOnLand","isTouchLand","vCurrSpeed","vCurrAcceleration","onCollsiWithPBullet","bullet","die","update","dt","isOutScreen","removeFromParent","playSpringAni","ENUM","PROP_COLOR","GRAY","play","RED"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAMC,QAAQ,OAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAAQJ,KADH;;AAGLK,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfQ,KAHP;;AAqBL;AACAC,QAtBK,kBAsBC;AACF,aAAKC,KAAL,GAAWC,UAAU,CAAV,CAAX;AACA,aAAKC,SAAL,GAAe,KAAKC,IAAL,CAAUC,YAAV,CAAuBT,GAAGU,SAA1B,CAAf;AACA,aAAKC,UAAL,GAAgB,KAAhB;AACH,KA1BI;AA2BLC,UA3BK,oBA2BG,CAEP,CA7BI;AA8BLC,WA9BK,qBA8BI;AACL,YAAIC,OAAK,KAAKN,IAAL,CAAUO,cAAV,EAAT;AACA,eAAOf,GAAGgB,IAAH,CAAQ,KAAKR,IAAL,CAAUS,CAAlB,EAAoBC,IAAIV,IAAJ,CAASW,CAA7B,EAA+BL,KAAKM,KAApC,EAA0CN,KAAKO,MAA/C,CAAP;AACH,KAjCI;AAkCLC,eAlCK,uBAkCOC,KAlCP,EAkCa;AACd,YAAGA,MAAMC,KAAT,EAAe;AACf,YAAIC,UAAQF,MAAMV,OAAN,EAAZ;AACA,YAAIa,UAAQ,KAAKb,OAAL,EAAZ;AACA,YAAG,KAAKc,eAAL,CAAqBF,OAArB,EAA6BC,OAA7B,CAAH,EAAyC;AACrC;AACA,gBAAI,KAAKE,MAAL,CAAYT,CAAZ,IAAeU,KAAKrB,IAAL,CAAUW,CAA1B,KACC,KAAKS,MAAL,CAAYX,CAAZ,GAAcH,KAAKM,KAAL,GAAW,CAAzB,IAA4BS,KAAKrB,IAAL,CAAUS,CAAtC,IAAyC,KAAKW,MAAL,CAAYX,CAAZ,GAAcH,KAAKM,KAAL,GAAW,CAAzB,IAA4BS,KAAKrB,IAAL,CAAUS,CAAV,GAAY,EAAlF,IACA,KAAKW,MAAL,CAAYX,CAAZ,GAAcH,KAAKM,KAAL,GAAW,CAAzB,IAA4BS,KAAKrB,IAAL,CAAUS,CAAtC,IAAyC,KAAKW,MAAL,CAAYX,CAAZ,GAAcH,KAAKM,KAAL,GAAW,CAAzB,IAA4BS,KAAKrB,IAAL,CAAUS,CAAV,GAAY,EAFjF,CAAH,EAEyF;AACrF,oBAAG,KAAKa,WAAL,KAAmBC,aAAaC,KAAnC,EAAyC;AACrC,yBAAKC,QAAL,GAAc,IAAd;AACH;AACD,qBAAKC,WAAL,GAAiB,IAAjB;AACA,qBAAK1B,IAAL,CAAUW,CAAV,GAAYU,KAAKrB,IAAL,CAAUW,CAAV,GAAY,EAAxB;AACA,qBAAKgB,UAAL,GAAgB,CAAhB;AACA,qBAAKC,iBAAL,GAAuB,CAAvB;AACH;;AAED;;AAEA;AACH;AACJ,KAxDI;AAyDLC,uBAzDK,+BAyDeC,MAzDf,EAyDsB;AACvBA,eAAOC,GAAP;AACH,KA3DI;;AA4DL;;AAEAC,UA9DK,kBA8DGC,EA9DH,EA8DO;AACR,YAAG,KAAKC,WAAL,EAAH,EAAsB;AAClB,iBAAKlC,IAAL,CAAUmC,gBAAV;AACH;AACJ,KAlEI;AAmELC,iBAnEK,2BAmEU;AACX,gBAAO,KAAKvC,KAAZ;AACI,iBAAKwC,KAAKC,UAAL,CAAgBC,IAArB;AACA,qBAAKxC,SAAL,CAAeyC,IAAf,CAAoB,aAApB;AACA;AACA,iBAAKH,KAAKC,UAAL,CAAgBG,GAArB;AACA,qBAAK1C,SAAL,CAAeyC,IAAf,CAAoB,YAApB;AACA;AANJ;AAQH;AA5EI,CAAT","file":"spring.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\prop","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar Actor=require(\"actor\");\r\ncc.Class({\r\n    extends:Actor,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    init(){\r\n        this.color=arguments[1];\r\n        this.animation=this.node.getComponent(cc.Animation);\r\n        this.isOnSpring=false;\r\n    },\r\n    spring(){\r\n\r\n    },\r\n    getSize(){\r\n        let size=this.node.getContentSize();\r\n        return cc.rect(this.node.x,his.node.y,size.width,size.height);\r\n    },\r\n    interactive(actor){\r\n        if(actor.isDie)return;\r\n        let sizeOne=actor.getSize();\r\n        let sizeTwo=this.getSize();\r\n        if(this.actorCollsition(sizeOne,sizeTwo)){\r\n            //向下碰撞\r\n            if((this.oldPos.y>=tile.node.y)\r\n            &&((this.oldPos.x-size.width/2>=tile.node.x&&this.oldPos.x-size.width/2<=tile.node.x+40)\r\n            ||(this.oldPos.x+size.width/2>=tile.node.x&&this.oldPos.x+size.width/2<=tile.node.x+40))){\r\n                if(this.playerState!==PLAYER_STATE.CLIMB){    \r\n                    this.isOnLand=true;\r\n                }\r\n                this.isTouchLand=true;\r\n                this.node.y=tile.node.y+40;\r\n                this.vCurrSpeed=0;\r\n                this.vCurrAcceleration=0;\r\n            }\r\n\r\n            //向左\r\n\r\n            //向右\r\n        }\r\n    },\r\n    onCollsiWithPBullet(bullet){\r\n        bullet.die();\r\n    },\r\n    // onLoad () {},    \r\n\r\n    update (dt) {\r\n        if(this.isOutScreen()){\r\n            this.node.removeFromParent();\r\n        }\r\n    },\r\n    playSpringAni(){\r\n        switch(this.color){\r\n            case ENUM.PROP_COLOR.GRAY:\r\n            this.animation.play(\"spring_gray\");\r\n            break;\r\n            case ENUM.PROP_COLOR.RED:\r\n            this.animation.play(\"spring_red\");\r\n            break;\r\n        }\r\n    }\r\n});\r\n"]}