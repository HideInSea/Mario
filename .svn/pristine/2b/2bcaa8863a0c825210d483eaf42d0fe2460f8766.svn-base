{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\eventMgr.js"],"names":["window","EM","_eventList","_keyList","type","on","callback","target","key","exitKey","cc","error","push","off","list","index","splice","emit","args","slice","call","arguments","eList","kList","value","apply","clear","_eventLis","arr","i","length","PAUSE_ACTOR","RESUME_ACTOR","UPDATE_SCORE","UPDATE_COIN","UPDATE_TIME","ADD_SCORE","ADD_COIN","ADD_LIFE","ADD_TIME","CHANGE_STATE","CREATE_MUSHROOM","CREATE_MONSTER","PIECES_EFFECT","COIN_EFFECT","SCORE_EFFECT","LIFE_EFFECT","CREATE_P_BULLET","COLLSI_FLAG","FLAG_TOUCH_LAND","PLAYER_TO_END","RISE_WRITE_FLAG","GAME_OVER","GAME_PASS","STOP_READTIME","PAUSE_READTIME","RESUME_READTIME","SHOW_SELECT_ZOOM","SHOW_PASS","REMOVE_ALL_MON","SHOW_THANK","SHOW_TIP","HEDGEHOG_DIE"],"mappings":"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","file":"eventMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["//事件管理EM(eventMgr)\r\n\r\nwindow.EM={ \r\n    _eventList:{},\r\n    _keyList:{},\r\n    //事件类型\r\n    type:{},\r\n    on:function(type,callback,target,key){\r\n        if(key){\r\n            this._keyList[type]=this._keyList[type]||[];\r\n            if(this.exitKey(this._keyList[type],key)!=-1){\r\n                cc.error(key+\":is already exit!\");\r\n                return;\r\n            }\r\n            this._keyList[type].push({key:key,callback:callback,target:target||null});\r\n        }else{\r\n            this._eventList[type]=this._eventList[type]||[];\r\n            this._eventList[type].push({callback:callback,target:target||null});\r\n        }\r\n    },\r\n    off:function(type,key){\r\n        if(key){\r\n            let list=this._keyList[type];\r\n            let index=this.exitKey(list,key);\r\n            if(index==-1){\r\n                cc.error(key+\":is not exit!\");\r\n                return;\r\n            }\r\n            list.splice(index,1);\r\n        }else{\r\n            delete this._eventList[type];\r\n        }\r\n    },\r\n    emit:function(type){\r\n        let args=[].slice.call(arguments,1);\r\n        let eList=this._eventList[type];\r\n        let kList=this._keyList[type];\r\n        if(!kList&&!eList){\r\n            cc.error(type+\":is not exit!\");return;\r\n        }\r\n        if(kList){\r\n            for(let value of kList){\r\n                value.callback.apply(value.target,args);\r\n            }\r\n        }\r\n        if(eList){\r\n            for(let value of eList){\r\n                value.callback.apply(value.target,args);\r\n            }\r\n        }\r\n    },\r\n    clear(){\r\n        this._keyList={};\r\n        this._eventLis={};\r\n    },\r\n    //arr是否存在key\r\n    exitKey(arr,key){\r\n        for(let i=0;i<arr.length;i++){\r\n            if(arr[i].key===key){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nEM.type.PAUSE_ACTOR=\"pause_actor\";\r\nEM.type.RESUME_ACTOR=\"resume_actor\";\r\n\r\nEM.type.UPDATE_SCORE=\"update_score\";\r\nEM.type.UPDATE_COIN=\"update_coin\";\r\nEM.type.UPDATE_TIME=\"update_time\";\r\n\r\nEM.type.ADD_SCORE=\"add_score\";\r\nEM.type.ADD_COIN=\"add_coin\";\r\nEM.type.ADD_LIFE=\"add_life\";\r\nEM.type.ADD_TIME=\"add_time\";\r\nEM.type.CHANGE_STATE=\"change_state\";\r\n\r\n\r\n//propMgr注册事件\r\nEM.type.CREATE_MUSHROOM=\"create_mushroom\";              //创建道具\r\nEM.type.CREATE_MONSTER=\"create_monster\";                //创建怪物\r\n\r\n//effectMgr注册事件\r\nEM.type.PIECES_EFFECT=\"pieces_effect\";\r\nEM.type.COIN_EFFECT=\"coin_effect\";\r\nEM.type.SCORE_EFFECT=\"score_effect\";\r\nEM.type.LIFE_EFFECT=\"life_effect\";\r\n\r\n\r\n//bulletMgr\r\nEM.type.CREATE_P_BULLET=\"create_p_bullet\";\r\n\r\n\r\nEM.type.COLLSI_FLAG=\"collsi_flag\";              //玩家碰到旗杆\r\nEM.type.FLAG_TOUCH_LAND=\"flag_touch_land\";      //旗帜碰到地面\r\nEM.type.PLAYER_TO_END=\"player_to_end\";          //玩家走到终点\r\nEM.type.RISE_WRITE_FLAG=\"rise_write_flag\";      //升起城堡白旗\r\nEM.type.GAME_OVER=\"game_over\";                  //游戏结束\r\nEM.type.GAME_PASS=\"game_pass\";                  //过关\r\nEM.type.STOP_READTIME=\"stop_readtime\";          //停止读秒\r\nEM.type.PAUSE_READTIME=\"stop_readtime\";         //停止读秒\r\nEM.type.RESUME_READTIME=\"resume_readtime\";      //恢复读秒\r\n\r\nEM.type.SHOW_SELECT_ZOOM=\"show_select_zoom\";    //显示隐藏关卡\r\nEM.type.SHOW_PASS=\"show_pass\";\r\nEM.type.REMOVE_ALL_MON=\"remove_all_mon\";        //移除所有怪物\r\n\r\nEM.type.SHOW_THANK=\"show_thank\";\r\nEM.type.SHOW_TIP=\"show_tip\";\r\n\r\n\r\n//刺猬死亡\r\nEM.type.HEDGEHOG_DIE=\"hedgehog_die\";"]}